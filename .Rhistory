```{r echo=T}
NBA1415$ThreesHigh <- NBA1415$ThreesMade / NBA1415$ThreesAttempted
MaxEThreesHigh<-aggregate(ThreesHigh~Team,NBA1415,max)
NBA1415MaxEThreesHigh<-merge(NBA1415,MaxEThreesHigh)
output<-NBA1415MaxEThreesHigh[order(NBA1415MaxEThreesHigh$ThreesHigh,decreasing = T),c("Team","Name","ThreesHigh")]
library(knitr)
kable(output, digits=2)
```
if (!require('jsonlite')){
install.packages("jsonlite")
library(jsonlite)
}
if (!require('RCurl')){
install.packages("RCurl")
library(RCurl)
}
```
##Facebook
<img src="Fig/Data.png" width="600px">
<img src="Fig/SN.png" width="600px">
## Add A New App
https://developers.facebook.com/
<img src="Fig/Facebook1.png" width="800px">
## Select A Platform
<img src="Fig/Facebook2.png" width="800px">
## Setup Your App
<img src="Fig/Facebook3.png" width="800px">
## Check Detail Info of You App
<img src="Fig/Facebook4.png" width="800px">
## Facebook Graph API Explorer
<img src="Fig/Facebook5.png" width="800px">
## Facebook Graph API Explorer
<img src="Fig/Facebook6.png" width="800px">
## Select Your App
<img src="Fig/Facebook7.png" width="800px">
## The First Try
<img src="Fig/Facebook8.png" width="800px">
## !?!
<img src="Fig/Facebook9.png" width="800px">
## You Need to Setup Access Tokens
<img src="Fig/Facebook10.png" width="800px">
## Looking Good!
<img src="Fig/Facebook11.png" width="800px">
## Select Some Columns/Fields
<img src="Fig/Facebook12.png" width="800px">
##  The Access Token Has Expiration Time
<img src="Fig/Facebook13.png" width="800px">
##  Get the URL Can Be Used in R
Get Code
<img src="Fig/Facebook14.png" width="600px">
##  cURL
<img src="Fig/Facebook15.png" width="800px">
## Graph API in R
```{r results='hide',message=FALSE, warning=FALSE}
if (!require('httr')){
install.packages("httr")
library(httr)
}
## Graph API in R
```{r results='hide',message=FALSE, warning=FALSE}
if (!require('httr')){
install.packages("httr")
library(httr)
}
```
```{r eval=FALSE}
token<-"CAACEdEose0cBAEwoxtlaCfzZCvb9lA2629hgE6ZCqsgvkPOBQaXb04Ey1lMZBpekQODDCKSv7JVCZCvJVmQ3DGRyXdRMkAy5GiL4I1GtghhQ7mXDnuklDXHGb3St8DgkKpWCGhkXZCoVe74yC4oefqXybAltwMQZBaeLZAdF3ILlr4jf8vkzLOnd8yvqmIZALSZAUojhQAmFC4RkPAIWZCz74P" #put your token
FBData = GET(
paste0("https://graph.facebook.com/v2.5/tsaiingwen?fields=
token<-"CAACEdEose0cBAEwoxtlaCfzZCvb9lA2629hgE6ZCqsgvkPOBQaXb04Ey1lMZBpekQODDCKSv7JVCZCvJVmQ3DGRyXdRMkAy5GiL4I1GtghhQ7mXDnuklDXHGb3St8DgkKpWCGhkXZCoVe74yC4oefqXybAltwMQZBaeLZAdF3ILlr4jf8vkzLOnd8yvqmIZALSZAUojhQAmFC4RkPAIWZCz74P" #put your token
FBData = GET(
paste0("https://graph.facebook.com/v2.5/DoctorKoWJ/posts?fields=comments%2Clikes%2Cmessage&limit=10&access_token=,token",
token))
names(FBData)
if (!require('jsonlite')){
install.packages("jsonlite")
library(jsonlite)
}
if (!require('RCurl')){
install.packages("RCurl")
library(RCurl)
}
```{r}
names(WaterData$result)
WaterDataFrame<-WaterData$result$results
WaterDataFrame$longitude<-as.numeric(WaterDataFrame$longitude)
WaterDataFrame$latitude<-as.numeric(WaterDataFrame$latitude)
WaterDataFrame$qua_cntu<-as.numeric(WaterDataFrame$qua_cntu)
WaterDataFrame
```
names(WaterData$result)
WaterDataFrame<-WaterData$result$results
WaterDataFrame$longitude<-as.numeric(WaterDataFrame$longitude)
WaterDataFrame$latitude<-as.numeric(WaterDataFrame$latitude)
WaterDataFrame$qua_cntu<-as.numeric(WaterDataFrame$qua_cntu)
WaterDataFrame
if (!require('httr')){
install.packages("httr")
library(httr)
}
```
```{r eval=FALSE}
#put your token
token<-"CAACEdEose0cBAEwoxtlaCfzZCvb9lA2629hgE6ZCqsgvkPOBQaXb04Ey1lMZBpekQODDCKSv7JVCZCvJVmQ3DGRyXdRMkAy5GiL4I1GtghhQ7mXDnuklDXHGb3St8DgkKpWCGhkXZCoVe74yC4oefqXybAltwMQZBaeLZAdF3ILlr4jf8vkzLOnd8yvqmIZALSZAUojhQAmFC4RkPAIWZCz74P" #put your token
FBData = GET(
paste0("https://graph.facebook.com/v2.5/DoctorKoWJ/posts?fields=comments%2Clikes%2Cmessage&limit=10&access_token=,token",
token))
names(FBData)
```
if (!require('httr')){
install.packages("httr")
library(httr)
}
install.packages("httr")
library(httr)
install.packages("httr")
library(httr)
install.packages("httr")
library(httr)
if (!require('httr')){
install.packages("httr")
library(httr)
}
if (!require('httr')){
install.packages("httr")
library(httr)
}
#put your token
token<-"CAACEdEose0cBACwPEwri1PT49PCkIQiOiM5DySvXnwp1yN8gEOD9qYPxc6gaRbEG2SwmhYHaYqVe5R0FQQVBif1zvwzPaDt8dB5i0gCwa91HLFRtBEn8KuvOnHj0N5xRH0PYFxLrx0rPOBnrShzi1lNY5TsnGMX6J3ZC6hANwLpSd7HhQXVRNZB2MSV6xQN3hnMoZBdMwZDZD" #put your token
FBData = GET(
paste0("https://graph.facebook.com/v2.5/DoctorKoWJ/posts?fields=comments%2Clikes%2Cmessage&limit=10&access_token=,token",
token))
names(FBData)
```
```
##  [1] "url"         "status_code" "headers"     "all_headers" "cookies"
##  [6] "content"     "date"        "times"       "request"     "handle"
```
## Graph API in R
```{r eval=FALSE}
json1 = content(FBData)
names(json1)
```
```
## [1] "posts" "id"
```
```{r eval=FALSE}
names(json1$posts)
```
```
## [1] "data"   "paging"
```
```{r eval=FALSE}
json2 = jsonlite::fromJSON(toJSON(json1$posts$data))
names(json2)
```
```
## [1] "message" "id"      "likes"
```
## Graph API in R
```{r eval=FALSE}
json2$message[[1]]
if (!require('jsonlite')){
install.packages("jsonlite")
library(jsonlite)
}
if (!require('RCurl')){
install.packages("RCurl")
library(RCurl)
}
```{r eval=FALSE}
json1 = content(FBData)
names(json1)
```{r eval=FALSE}
json2$message[[1]]
```{r eval=FALSE}
json2 = jsonlite::fromJSON(toJSON(json1$posts$data))
names(json2)
```
```
## [1] "message" "id"      "likes"
```
## Graph API in R
```{r eval=FALSE}
json2$message[[1]]
```
```
## [1] "再多雨，總有放晴的一天。\n\n圖片版權：\n
## kuoyoung@flickr (https://goo.gl/UPIZ5r)\n
## CC BY-NC-ND 2.0 (https://goo.gl/cefU8)"
```
```{r eval=FALSE}
json2$likes$summary$total_count[[1]]
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
getPage("DoctorKoWJ", token,n = 30)
Set the dates vector
```{r eval=FALSE}
totalPage<-NULL
lastDate<-Sys.Date()
numberOfPost<-30
DateVector<-seq(as.Date("2016-01-01"),lastDate,by="5 days")
DateVectorStr<-as.character(DateVector)
DateVectorStr
```{r eval=FALSE}
token<-'CAACEdEose0cBACwPEwri1PT49PCkIQiOiM5DySvXnwp1yN8gEOD9qYPxc6gaRbEG2SwmhYHaYqVe5R0FQQVBif1zvwzPaDt8dB5i0gCwa91HLFRtBEn8KuvOnHj0N5xRH0PYFxLrx0rPOBnrShzi1lNY5TsnGMX6J3ZC6hANwLpSd7HhQXVRNZB2MSV6xQN3hnMoZBdMwZDZD'
for(i in 1:(length(DateVectorStr)-1)){
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("DoctorKoWJ", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
nrow(totalPage)
```
token<-'CAACEdEose0cBACwPEwri1PT49PCkIQiOiM5DySvXnwp1yN8gEOD9qYPxc6gaRbEG2SwmhYHaYqVe5R0FQQVBif1zvwzPaDt8dB5i0gCwa91HLFRtBEn8KuvOnHj0N5xRH0PYFxLrx0rPOBnrShzi1lNY5TsnGMX6J3ZC6hANwLpSd7HhQXVRNZB2MSV6xQN3hnMoZBdMwZDZD'
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("DoctorKoWJ", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
nrow(totalPage)
#日期處理
totalPage$datetime <- as.POSIXct(totalPage$created_time,
format = "%Y-%m-%dT%H:%M:%S+0000",
tz = "GMT") #2016-01-16T15:05:36+0000
totalPage$dateTPE <- format(totalPage$datetime, "%Y-%m-%d",
tz = "Asia/Taipei") #2016-01-16
totalPage$weekdays <-weekdays(as.Date(totalPage$dateTPE))
```
if (!require('XML')){
install.packages("XML")
library(XML)
}
aggregate(likes~date,totalPage,mean)
View(totalPage)
#計算likes, comments, shares
aggregate(totalPage$likes_count~date,totalPage,mean)
#計算likes, comments, shares
aggregate(likes_count~dateTPE,totalPage,mean)
totalPage$datetime <- as.POSIXct(totalPage$created_time,
format = "%Y-%m-%dT%H:%M:%S+0000",
tz = "GMT") #2016-01-16T15:05:36+0000
totalPage$dateTPE <- format(totalPage$datetime, "%Y-%m-%d",
tz = "Asia/Taipei") #2016-01-16
totalPage$weekdays <-weekdays(as.Date(totalPage$dateTPE))
```
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
totalPage<-NULL
lastDate<-Sys.Date()
numberOfPost<-30
DateVector<-seq(as.Date("2016-01-01"),lastDate,by="5 days")
DateVectorStr<-as.character(DateVector)
DateVectorStr
token<-'CAACEdEose0cBACwPEwri1PT49PCkIQiOiM5DySvXnwp1yN8gEOD9qYPxc6gaRbEG2SwmhYHaYqVe5R0FQQVBif1zvwzPaDt8dB5i0gCwa91HLFRtBEn8KuvOnHj0N5xRH0PYFxLrx0rPOBnrShzi1lNY5TsnGMX6J3ZC6hANwLpSd7HhQXVRNZB2MSV6xQN3hnMoZBdMwZDZD'
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("DoctorKoWJ", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
nrow(totalPage)
totalPage$datetime <- as.POSIXct(totalPage$created_time,
format = "%Y-%m-%dT%H:%M:%S+0000",
tz = "GMT")
totalPage$dateTPE <- format(totalPage$datetime, "%Y-%m-%d",
tz = "Asia/Taipei")
totalPage$weekdays <-weekdays(as.Date(totalPage$dateTPE))
```
##每日發文數分析
aggregate(message~dateTPE,totalPage,mean)
aggregate(message~dateTPE,totalPage,length)
aggregate(message~dateTPE;weekdays,totalPage,length)
aggregate(message~dateTPE,weekdays,totalPage,length)
aggregate(message~dateTPE-weekdays,totalPage,length)
aggregate(message~weekdays-dateTPE,totalPage,length)
library(knitr)
View(output)
output<-aggregate(message~weekdays-dateTPE,totalPage,length)
View(output)
library(knitr)
kable(output, digits=2)
View(output)
kable(output, digits=2)
output<-aggregate(message~weekdays-dateTPE,totalPage,length)
library(knitr)
kable(output, digits=2)
x17<-Sys.time()
x17
LisDate<-as.POSIXlt(x17)
IntDate<-as.POSIXct(x17)
LisDate
IntDate
unclass(LisDate)
unclass(IntDate)
output<-totalPage["2016-01-09","message"]
library(knitr)
kable(output, digits=2)
output<-totalPage["2016-01-09","message"]
[,"message"]
output<-totalPage[,"message"]
output<-totalPage[,"message"]
output<-totalPage["2016-01-09","message"]
output<-totalPage[,"message"]
iris[,"Species"] #Column name=="Species"
output<-totalPage[,"message"]
totalPage[,"message"]
output<-totalPage[,"message"]
output<-totalPage["dateTpe=2016-01-09","message"]
library(knitr)
kable(output, digits=2)
output<-totalPage[dateTpe=2016-01-09,"message"]
output<-totalPage[2016-01-09,"message"]
library(knitr)
kable(output, digits=2)
output<-totalPage[2016-01-09,"message"]
output<-totalPage[totalPage$dateTPE=2016-01-09,"message"]
for(i in 1:nrow(totalPage)){
if(totalPage[i,"dateTPE"]=2016-01-09)
for(i in 1:nrow(totalPage)){
if(totalPage[i,"dateTPE"]==2016-01-09)
{
output<-[i,c("message")]
}
}
for(i in 1:nrow(totalPage)){
if(totalPage[i,"dateTPE"]==2016-01-09)
{
output<-[i,c("message")]
}
}
for(i in 1:nrow(totalPage)){
if(totalPage[i,"dateTPE"]==2016-01-09)
{
output<-[i,c("message")]
{
print(NBA1415[i,c("Name","Team","Position")])
}
}
output<-totalPage[dataTPE==2016-01-09,"message"]
output<-totalPage[2016-01-09,"message"]
output<-totalPage[,"message"&&"dataTPE"==2016-01-09]
output<-totalPage["message",dataTPE==2016-01-09]
output<-totalPage[,"dataTPE"==2016-01-09]
View(output)
View(output)
output<-aggregate(message~weekdays-dateTPE,totalPage,length)
output<-aggregate(message~dateTPE+weekdays,totalPage,length)
library(knitr)
kable(output, digits=2)
output<-aggregate(message~dateTPE-weekdays,totalPage,length)
output<-aggregate(message~weekdays+dateTPE,totalPage,length)
View(output)
output<-aggregate(dateTPE=2016-01-09~message,totalPage,length)
output<-split(totalPage, dateTPE==2016-01-09)
grep("Duncan",NBA1415$Name)
grepl("Duncan",NBA1415$Name)
subset(NBA1415,grepl("Duncan",Name))
grep("Duncan",NBA1415$Name)
NBA1415[grep("Duncan",NBA1415$Name),]
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
library(knitr)
kable(output, digits=2)
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),c("message")]
library(knitr)
kable(output, digits=2)
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),]
library(knitr)
kable(output, digits=2)
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
library(knitr)
kable(output, digits=2)
totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
library(knitr)
kable(output, digits=2)
which(letters>"m")
NBA1415$Personality<-ifelse(NBA1415$GamesPlayed>30,"Hardwork","Lazy")
output<-ifelse(totalPage$dateTPE==2016-01-09,"message")
library(knitr)
kable(output, digits=2)
ifelse(NBA1415$GamesPlayed>30,"Hardwork","Lazy")
NBA1415$Personality<-ifelse(NBA1415$GamesPlayed>30,"Hardwork","Lazy")
output<-(totalPage$dateTPE==2016-01-09,"message")
output<-totalPage[totalPage$dateTPE==2016-01-09,"message"]
library(knitr)
kable(output, digits=2)
library(knitr)
kable(output, digits=2)
output<-aggregate(message~weekdays+dateTPE,totalPage,length)
library(knitr)
kable(output, digits=2)
output<-totalPage[,"message"]
library(knitr)
kable(output, digits=2)
output<-totalPage[totalPage$dateTPE==2016-0109,c("dateTPE","message")]
View(output)
output<-totalPage[totalPage$dateTPE==2016-01-09,c("dateTPE","message")]
output<-totalPage[totalPage$dateTPE=2016-01-09,c("dateTPE","message")]
output<-totalPage[totalPage$dateTPE==2016-01-09,c("dateTPE","message")]
library(knitr)
kable(output, digits=2)
output<-totalPage[dateTPE==2016-01-09,c("dateTPE","message")]
output<-totalPage[totalPage$dateTPE==2016-01-09,c("dateTPE","message")]
library(knitr)
kable(output, digits=2)
output<-totalPage[totalPage$dateTPE==2016-01-09,c("dateTPE","message")]
library(knitr)
kable(output, digits=2)
output<-totalPage[totalPage$dateTPE==2016-01-09,c(,"message")]
output<-totalPage[totalPage$dateTPE==2016-01-09,c("message")]
library(knitr)
kable(output, digits=2)
output<-totalPage[totalPage$dateTPE==2016-01-09,c("dateTPE","message")]
library(knitr)
kable(output, digits=2)
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
library(knitr)
kable(output, digits=2)
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),C("dateTPE","message")]
library(knitr)
kable(output, digits=2)
```
```{r echo=T}
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),"message"]
library(knitr)
kable(output, digits=2)
output<-totalPage[grep("2016-01-09",totalPage$dateTPE),c("dateTPE","message")]
library(knitr)
kable(output, digits=2)
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
totalPage<-NULL
token<-'CAACEdEose0cBAPMqZBlCzuez19QnsAvELakfUrbNZCtQEDT9plEOcy6ZALLNFlLzGPr3KZC1ZBYqUE34Xc8m3c1KXD58UyMZBpsYv99CgxHdbFn5SpZBOj445WqFYyPq2O524f5smxZCTyVggzGF9zwVEQmeCnHzv2SeJliqI0wf6GVnGVC2eIiBjCeIGgyLi5CyXp2nK6DZADQZDZD'
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("DoctorKoWJ", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
nrow(totalPage)
totalPage$datetime <- as.POSIXct(totalPage$created_time,
format = "%Y-%m-%dT%H:%M:%S+0000",
View(totalPage)
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
totalPage<-NULL
lastDate<-Sys.Date()
numberOfPost<-30
DateVector<-seq(as.Date("2016-01-01"),lastDate,by="5 days")
DateVectorStr<-as.character(DateVector)
DateVectorStr
token<-'CAACEdEose0cBAPMqZBlCzuez19QnsAvELakfUrbNZCtQEDT9plEOcy6ZALLNFlLzGPr3KZC1ZBYqUE34Xc8m3c1KXD58UyMZBpsYv99CgxHdbFn5SpZBOj445WqFYyPq2O524f5smxZCTyVggzGF9zwVEQmeCnHzv2SeJliqI0wf6GVnGVC2eIiBjCeIGgyLi5CyXp2nK6DZADQZDZD'
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("DoctorKoWJ", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
nrow(totalPage)
totalPage$datetime <- as.POSIXct(totalPage$created_time,
format = "%Y-%m-%dT%H:%M:%S+0000",
tz = "GMT")
totalPage$datetime <- as.POSIXct(totalPage$created_time,
format = "%Y-%m-%dT%H:%M:%S+0000",
tz = "GMT")
totalPage$dateTPE <- format(totalPage$datetime, "%Y-%m-%d",
tz = "Asia/Taipei")
totalPage$weekdays <-weekdays(as.Date(totalPage$dateTPE))
View(totalPage)
output<-aggregate(likes_count~weekdays+dateTPE,totalPage,mean)
library(knitr)
kable(output, digits=2)
output<-aggregate(likes_count~weekdays+dateTPE,totalPage,length)
library(knitr)
kable(output, digits=2)
output<-aggregate(likes_count~weekdays+dateTPE,totalPage,mean)
library(knitr)
kable(output, digits=2)
output<-aggregate(likes_count~dateTPE,totalPage,mean)
library(knitr)
kable(output, digits=2)
output<-aggregate(comments_count~dateTPE,totalPage,mean)
library(knitr)
kable(output, digits=2)
```{r echo=T}
output<-aggregate(shares_count~dateTPE,totalPage,mean)
library(knitr)
kable(output, digits=2)
if (!require('Rfacebook')){
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
token<-'CAACEdEose0cBAKg3ZADq6fkgstOfBdXaZBKwoHyKP26TidyDMY1oHegYCAnNgOxQ3voaNLTZAj73e0wMHgAZBf8fZAInwSg2DQi6jFQEVSKGzsddHAfwRzTgZAArpvqVCCiWK00v8tRVx4ZAzngKeQMwqqZCU0EeFMDZBuQZC3y7OhRMBixdvYZA36YZBuO4jt8Y8ZCXoIJk2Y3kyyAZDZD'
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("DoctorKoWJ", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
nrow(totalPage)
